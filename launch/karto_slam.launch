<!--
Provides a reasonable set of parameters for running Karto on a robot
Assumes an 'odom_combined' frame, that provides reasonably accurate odometry
-->

<launch>
  <param name="/use_sim_time" value="true" />

  <node pkg="tf" type="static_transform_publisher" name="map_publisher" args="0.0 0 0 0 0 0 base_link laser 100" />

  <node pkg="slam_karto_gtsam" type="slam_karto_gtsam" name="slam_karto_gtsam" output="screen">
    <remap from="scan" to="laser"/>
    <param name="map_frame" value="map"/>
    <param name="odom_frame" value="odom"/>
    <param name="map_update_interval" value="25"/>
    <param name="resolution" value="0.025"/>
  </node>
  <node name="rviz" pkg="rviz" type="rviz" required="true" args="-d $(find slam_karto_gtsam)/rviz/karto_slam.rviz" />
  <node name="playbag" pkg="rosbag" type="play"
      args="--clock -r 1 $(arg bag_filename)" />
</launch>
